<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.bootcss.com/normalize/8.0.0/normalize.min.css">
    <link rel="stylesheet" href="../../../css/main.css">
    <title>周鑫文的博客</title>
    <style type="text/css">
        textarea{
            width: 100%;
            height: 500px;
        }
        img{
            width: 100%;
        }
    </style>
</head>
<body>
<div class="side-bar">
    <div class="header">
        <a href="../../../index.html" class="logo">Zhouxinwen</a>
        <div class="intro">Little heart, big dreams.</div>
    </div>
    <div class="nav">
        <a href="../../../rank/My-insight.html" class="item">My insights </a>
        <a href="../../../rank/Code-life.html" class="item">Code life</a>
        <a href="../../../rank/Growth-notes.html" class="item">Growth notes</a>
    </div>
    <div class="tag-list">
        <a href="../../../develop/Being-developed.html" class="item">About me</a>
        <a href="../../../develop/Being-developed.html" class="item">connect me</a>
        <a href="../../../develop/Being-developed.html" class="item">focus me</a>
    </div>
</div>
</div><div class="main">s

    <div class="article">
        <h1 class="title">Python游戏制作</h1>
        <div class="status">发布于：2018/11/13 23:05 | 修改次数：0|标签：代码</div>
        <div class="content">
            <div>
               代码：
            </div>
            <div>
                alien_invasion.py
            </div>
            <div>
                <textarea>
                    import sys
import pygame
from pygame.sprite import Group
from settings import Settings
from game_stats import GameStats
from button import Button
from ship import Ship
from alien import Alien
import game_functions as gf

def run_game():
    pygame.init()
    ai_settings=Settings()
    screen=pygame.display.set_mode(
    (ai_settings.screen_width,ai_settings.screen_height))
    pygame.display.set_caption('alien invasion')
    play_button=Button(ai_settings,screen,'play')
    ship=Ship(ai_settings,screen)
    bullets=Group()
    aliens=Group()
    stats=GameStats(ai_settings)
    gf.create_fleet(ai_settings,screen,ship,aliens)
    while True:
        gf.check_events(ai_settings,screen,stats,play_button,ship,aliens,
            bullets)
        if stats.game_active:
            ship.update()
            gf.update_bullets(ai_settings,screen,ship,aliens,bullets)
            gf.update_aliens(ai_settings,stats,screen,ship,aliens,bullets)
        gf.update_screen(ai_settings,screen,stats,ship,aliens,bullets,
        play_button)
run_game()

                </textarea>
            </div>
            <div>
                alien.py
            </div>
            <div>
                <textarea>
                    import pygame
from pygame.sprite import Sprite
class Alien(Sprite):
    def __init__(self,ai_settings,screen):
        super(Alien,self).__init__()
        self.screen=screen
        self.ai_settings=ai_settings
        self.image=pygame.image.load('images/alien.bmp')
        self.rect=self.image.get_rect()
        self.rect.x=self.rect.width
        self.rect.y=self.rect.height
        self.x=float(self.rect.x)
    def blitme(self):
        self.screen.blit(self.image,self.rect)
    def check_edges(self):
        screen_rect=self.screen.get_rect()
        if self.rect.right>=screen_rect.right:
            return True
        elif self.rect.left<0:
            return True
    def update(self):
        self.x+=(self.ai_settings.alien_speed_factor *
        self.ai_settings.fleet_direction)
        self.rect.x=self.x



                </textarea>
            </div>
            <div>
                bullet.py
            </div>
            <div>
                <textarea>
                    import pygame
from pygame.sprite import Sprite
class Bullet(Sprite):
    def __init__(self,ai_settings,screen,ship):
        super(Bullet,self).__init__()
        self.screen=screen
        self.rect=pygame.Rect(0,0,ai_settings.bullet_width,
        ai_settings.bullet_height)
        self.rect.centerx=ship.rect.centerx
        self.rect.top=ship.rect.top
        self.y=float(self.rect.y)
        self.color=ai_settings.bullet_color
        self.speed_factor=ai_settings.bullet_speed_factor
    def update(self):
        self.y-=self.speed_factor
        self.rect.y=self.y
    def draw_bullet(self):
        pygame.draw.rect(self.screen,self.color,self.rect)

                </textarea>
            </div>
            <div>
                settings.py
            </div>
            <div>
                class Settings():
                def __init__(self):
                self.screen_width=1200
                self.screen_height=500
                self.bg_color=(230,230,230)
                self.ship_speed_factor=1.5
                self.ship_limit=3
                self.bullet_speed_factor=3
                self.bullet_width=3
                self.bullet_height=15
                self.bullet_color=60,60,60
                self.bullets_allowed=3
                self.alien_speed_factor=1
                self.fleet_drop_speed=10
                self.fleet_direction=1
                self.speedup_scale=1.1
                self.initialize_dynamic_settings()
                def initialize_dynamic_settings(self):
                self.ship_speed_factor=1.5
                self.bullet_speed_factor=3
                self.alien_speed_factor=1
                self.fleet_direction=1
                def increase_speed(self):
                self.ship_speed_factor*=self.speedup_scale
                self.bullet_speed_factor*=self.speedup_scale
                self.alien_speed_factor*=self.speedup_scale

            </div>
            <div>
                game_functions.py
            </div>
            <div>
                <textarea>
                     import sys
                from bullet import Bullet
                from alien import Alien
                from random import randint
                from time import sleep
                import pygame
                def check_keydown_events(event,ai_settings,screen,ship,bullets):
                if event.key==pygame.K_RIGHT:
                ship.moving_right=True
                elif event.key==pygame.K_LEFT:
                ship.moving_left=True
                if event.key==pygame.K_UP:
                ship.moving_up=True
                elif event.key==pygame.K_DOWN:
                ship.moving_down=True
                if event.key==pygame.K_SPACE:
                fire_bullet(ai_settings,screen,ship,bullets)
                elif event.key==pygame.K_q:
                sys.exit()
                def fire_bullet(ai_settings,screen,ship,bullets):
                if len(bullets)<ai_settings.bullets_allowed:
                        new_bullet=Bullet(ai_settings,screen,ship)
                        bullets.add(new_bullet)
                        def check_keyup_events(event,ship):
                        if event.key==pygame.K_RIGHT:
                        ship.moving_right=False
                        elif event.key==pygame.K_LEFT:
                        ship.moving_left=False
                        if event.key==pygame.K_UP:
                        ship.moving_up=False
                        elif event.key==pygame.K_DOWN:
                        ship.moving_down=False
                        def check_events(ai_settings,screen,stats,play_button,ship,aliens,bullets):
                        for event in pygame.event.get():
                        if event.type==pygame.QUIT:
                        sys.exit()
                        elif event.type==pygame.KEYDOWN:
                        check_keydown_events(event,ai_settings,screen,ship,bullets)
                        elif event.type==pygame.KEYUP:
                        check_keyup_events(event,ship)
                        elif event.type==pygame.MOUSEBUTTONDOWN:
                        mouse_x,mouse_y=pygame.mouse.get_pos()
                        check_play_button(ai_settings,screen,stats,play_button,ship,aliens,
                        bullets,mouse_x,mouse_y)
                        def check_play_button(ai_settings,screen,stats,play_button,ship,aliens,
                        bullets,mouse_x,mouse_y):
                        button_clicked=play_button.rect.collidepoint(mouse_x,mouse_y)
                        if button_clicked and not stats.game_active:
                        ai_settings.initialize_dynamic_settings()
                        pygame.mouse.set_visible(False)
                        stats.reset_stats()
                        stats.game_active=True
                        aliens.empty()
                        bullets.empty()
                        create_fleet(ai_settings,screen,ship,aliens)
                        ship.center_ship()
                        def update_screen(ai_settings,screen,stats,ship,aliens,bullets,play_button):
                        screen.fill(ai_settings.bg_color)
                        for bullet in bullets.sprites():
                        bullet.draw_bullet()
                        ship.blitme()
                        aliens.draw(screen)
                        if not stats.game_active:
                        play_button.draw_button()
                        pygame.display.flip()
                        def update_bullets(ai_settings,screen,ship,aliens,bullets):
                        bullets.update()
                        for bullet in bullets.copy():
                        if bullet.rect.bottom<=0:
                bullets.remove(bullet)
                check_bullet_alien_collisions(ai_settings,screen,ship,aliens,bullets)
                def check_bullet_alien_collisions(ai_settings,screen,ship,aliens,bullets):
                collisions=pygame.sprite.groupcollide(bullets,aliens,True,True)
                if len(aliens)==0:
                bullets.empty()
                ai_settings.increase_speed()
                create_fleet(ai_settings,screen,ship,aliens)
                def get_number_aliens_x(ai_settings,alien_width):
                available_space_x=ai_settings.screen_width-2*alien_width
                number_aliens_x=int(available_space_x/(2*alien_width))
                return number_aliens_x
                def get_number_rows(ai_settings,ship_height,alien_height):
                available_space_y=(ai_settings.screen_height-(3*alien_height)-ship_height)
                number_rows=int(available_space_y/(2*alien_height))
                return number_rows
                def create_alien(ai_settings,screen,aliens,alien_number,row_number):
                alien=Alien(ai_settings,screen)
                alien_width=alien.rect.width
                alien.x=alien_width+2*alien_width*alien_number
                alien.rect.x=alien.x
                alien.rect.y=alien.rect.height+2*alien.rect.height*row_number
                aliens.add(alien)
                def create_fleet(ai_settings,screen,ship,aliens):
                alien=Alien(ai_settings,screen)
                number_aliens_x=get_number_aliens_x(ai_settings,alien.rect.width)
                number_rows=get_number_rows(ai_settings,ship.rect.height,
                alien.rect.height)
                for row_number in range(number_rows):
                for alien_number in range(number_aliens_x):
                create_alien(ai_settings,screen,aliens,alien_number,row_number)
                def check_fleet_edges(ai_settings,aliens):
                for alien in aliens.sprites():
                if alien.check_edges():
                change_fleet_direction(ai_settings,aliens)
                break
                def change_fleet_direction(ai_settings,aliens):
                for alien in aliens.sprites():
                alien.rect.y+=ai_settings.fleet_drop_speed
                ai_settings.fleet_direction*=-1
                def ship_hit(ai_settings,stats,screen,ship,aliens,bullets):
                if stats.ships_left>0:
                stats.ships_left-=1
                aliens.empty()
                bullets.empty()
                create_fleet(ai_settings,screen,ship,aliens)
                ship.center_ship()
                sleep(0.5)
                else:
                stats.game_active=False
                pygame.mouse.set_visible(True)
                def check_aliens_bottom(ai_settings,stats,screen,ship,aliens,bullets):
                screen_rect=screen.get_rect()
                for alien in aliens.sprites():
                if alien.rect.bottom>=screen_rect.bottom:
                ship_hit(ai_settings,stats,screen,ship,aliens,bullets)
                break
                def update_aliens(ai_settings,stats,screen,ship,aliens,bullets):
                check_fleet_edges(ai_settings,aliens)
                aliens.update()
                if pygame.sprite.spritecollideany(ship,aliens):
                ship_hit(ai_settings,stats,screen,ship,aliens,bullets)
                check_aliens_bottom(ai_settings,stats,screen,ship,aliens,bullets)
                </textarea>






            </div>
            <div>
                game_stats.py
            </div>
            <div>
                <textarea>
                      class GameStats():
                def __init__(self,ai_settings):
                self.ai_settings=ai_settings
                self.reset_stats()
                self.game_active=False
                def reset_stats(self):
                self.ships_left=self.ai_settings.ship_limit
                self.score=0
                </textarea>


            </div>
            <div>
                ship.py
            </div>
            <div>
                <textarea>
                     import pygame
                class Ship():
                def __init__(self,ai_settings,screen):
                self.screen=screen
                self.ai_settings=ai_settings
                self.image=pygame.image.load('images/ship.bmp')
                self.rect=self.image.get_rect()
                self.screen_rect=screen.get_rect()
                self.rect.centerx=self.screen_rect.centerx
                self.rect.bottom=self.screen_rect.bottom
                self.moving_right=False
                self.moving_left=False
                self.moving_up=False
                self.moving_down=False
                self.centerx=float(self.rect.centerx)
                self.y=float(self.rect.bottom)
                self.center=float(self.rect.centerx)
                def center_ship(self):
                self.centerx=self.screen_rect.centerx
                self.y=self.screen_rect.bottom
                def update(self):
                if self.moving_right and self.rect.right<self.screen_rect.right:
                        self.centerx+=self.ai_settings.ship_speed_factor
                        elif self.moving_left and self.rect.left>0:
                    self.centerx-=self.ai_settings.ship_speed_factor
                    self.rect.centerx=self.centerx
                    if self.moving_up and self.rect.top>self.screen_rect.top:
                    self.y-=self.ai_settings.ship_speed_factor
                    elif self.moving_down and self.rect.bottom<self.screen_rect.bottom:
                            self.y+=self.ai_settings.ship_speed_factor
                            self.rect.bottom=self.y
                            def blitme(self):
                            self.screen.blit(self.image,self.rect)
                </textarea>



            </div>
            <div>
                button.py
            </div>
            <div>
                <textarea>
                      import pygame.font
                class Button():
                def __init__(self,ai_settings,screen,msg):
                self.screen=screen
                self.screen_rect=screen.get_rect()
                self.width,self.height=200,50
                self.button_color=(0,255,0)
                self.text_color=(255,255,255)
                self.font=pygame.font.SysFont(None,48)
                self.rect=pygame.Rect(0,0,self.width,self.height)
                self.rect.center=self.screen_rect.center
                self.prep_msg(msg)
                def prep_msg(self,msg):
                self.msg_image=self.font.render(msg,True,self.text_color,
                self.button_color)
                self.msg_image_rect=self.msg_image.get_rect()
                self.msg_image_rect.center=self.rect.center
                def draw_button(self):
                self.screen.fill(self.button_color,self.rect)
                self.screen.blit(self.msg_image,self.msg_image_rect)
                </textarea>


            </div>
            <div>
                scoreboard.py
            </div>
            <div>
                <textarea>
                     import pygame.font
                class Scoreboard():
                def __init__(self,ai_settings,screen,stats):
                self.screen=screen
                self.screen_rect=screen.get_rect()
                self.ai_settings=ai_settings
                self.stats=stats
                self.text_color=(30,30,30)
                self.font=pygame.font.SysFont(None,48)
                self.prep_score()
                def prep_ ;
                </textarea>

            </div>
            <div>
                效果图：
            </div>
            <div>
                <img src="python游戏.png">
            </div>
            <div>
                因为是以前照着书上做的，忘了怎么做的了，所以不发文件了。
            </div>
            <div></div>

        </div>
    </div>
</div>
</body>
</html>